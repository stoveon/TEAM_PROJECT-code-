<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="questionDao">

	<insert id="questioninsert" parameterType="QuestionVo">
		insert into question (num, askType, nickname, title, content, answer, askdate, answerdate)
		values(question_seq.nextval, #{askType}, #{nickname}, #{title}, #{content}, null, sysdate, null)
	</insert> 

	<update id="questionupdate" parameterType="QuestionVo">
		update question set 
		      title = #{title},
		      content = #{content},
		      answer = #{answer},
		      answerdate = sysdate
		      where num = #{num}
	</update>
	<select id="questionselectall" parameterType="HashMap" resultType="QuestionVo">
		select * from question 
		<if test='nickname.equals("manager")'>
         where ASKTYPE = #{askType} order by title desc
      </if>
      <if test='askType.equals("customer")'>
         where nickname = #{nickname} order by askType desc
      </if>
	</select>

	<select id="questionselectone" parameterType="Integer"
		resultType="QuestionVo">
		select NUM, ASKTYPE, NICKNAME, TITLE, CONTENT, ANSWER,
		ASKDATE, ANSWERDATE 
		from QUESTION where NUM = #{num}
	</select>

	<delete id="questiondeletequestion" parameterType="String">
		delete from 
		QUESTION where NICKNAME = #{nickname}
	</delete>
    </mapper>